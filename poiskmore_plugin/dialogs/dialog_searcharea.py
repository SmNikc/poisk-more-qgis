class SearchAreaDialog(QDialog): def init(self, iface): super().init() self.iface = iface layout = QVBoxLayout(self) self.coords = QLineEdit() layout.addWidget(QLabel("Coords (lat1,lon1;lat2,lon2;...):")) layout.addWidget(self.coords) btn = QPushButton("Create Area") btn.clicked.connect(self.create_area) layout.addWidget(btn)
def create_area(self): try: points = [QgsPointXY(float(lon), float(lat)) for lat, lon in [pair.split(',') for pair in self.coords.text().split(';')]] polygon = QgsGeometry.fromPolygonXY([points]) layer = QgsVectorLayer("Polygon?crs=epsg:4326", "Search Area", "memory") feat = QgsFeature() feat.setGeometry(polygon) layer.dataProvider().addFeature(feat) QgsProject.instance().addMapLayer(layer) self.accept() except: QMessageBox.warning(self, "Ошибка", "Неверные координаты")