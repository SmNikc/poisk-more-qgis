<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–µ–∫—Ç–∞: poiskmore_plugin</title>
<style>
body { font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }
pre { background-color: #2d2d2d; color: #f8f8f2; padding: 10px; border-radius: 5px; overflow-x: auto; }
h1 { color: #333; border-bottom: 2px solid #ddd; padding-bottom: 10px; }
h2 { color: #555; margin-top: 40px; }
h3 { color: #666; margin-top: 20px; }
.directory { margin-left: 20px; }
</style>
</head>
<body>
<h1>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–µ–∫—Ç–∞: poiskmore_plugin</h1>
<h3>--- FILE: metadata.txt ---</h3>
<pre><code>
[general]
name=PoiskMore
description=–ü–ª–∞–≥–∏–Ω –¥–ª—è SAR –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ IAMSAR –∏ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –≤ QGIS
version=1.0.1
qgisMinimumVersion=3.40
qgisMaximumVersion=3.40
author=MorSpasService &amp; AI Adaptation (Grok)
email=support@poisk-more.ru
repository=https://github.com/poisk-more/qgis-plugin
experimental=False
deprecated=False
tags=sar,search,rescue,maritime,iamsar,qgis
category=Plugins

</code></pre>
<h3>--- FILE: poiskmore.py ---</h3>
<pre><code>
from qgis.PyQt.QtWidgets import QAction, QMenu from qgis.utils import iface
from .dialogs.sitrep_dialog import SitrepDialog from .dialogs.region_dialog import RegionDialog from .dialogs.exercise_dialog import ExerciseDialog
from .dialogs.err_editing_dialog import ErrEditingDialog from .dialogs.probability_dialog import ProbabilityDialog from .dialogs.sru_routing_dialog import SruRoutingDialog from .dialogs.operator_log_dialog import OperatorLogDialog
from .dialogs.search_scheme_dialog import SearchSchemeDialog
class PoiskMorePlugin:
def init(self, iface):
self.iface = iface self.actions = []
def initGui(self):
if not self.iface:
print(&quot;–û—à–∏–±–∫–∞: iface –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω&quot;) return
self.menu = QMenu(&quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot;, self.iface.mainWindow().menuBar()) self.iface.mainWindow().menuBar().addMenu(self.menu) self._add(&quot;SITREP&quot;, self.run_sitrep)
self._add(&quot;–†–∞–π–æ–Ω –ø–æ–∏—Å–∫–∞&quot;, self.run_region) self._add(&quot;–£—á–µ–Ω–∏–µ&quot;, self.run_exercise) self._add(&quot;–ò–Ω—Ü–∏–¥–µ–Ω—Ç&quot;, self.run_err) self._add(&quot;–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å&quot;, self.run_probability) self._add(&quot;–ú–∞—Ä—à—Ä—É—Ç SRU&quot;, self.run_route) self._add(&quot;–°—Ö–µ–º–∞ –ø–æ–∏—Å–∫–∞&quot;, self.run_scheme) self._add(&quot;–õ–æ–≥&quot;, self.run_log)
 
def _add(self, name, callback):
action = QAction(name, self.iface.mainWindow()) action.triggered.connect(callback) self.menu.addAction(action) self.actions.append(action)
def unload(self):
for action in self.actions: self.iface.removePluginMenu(&quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot;, action)
def run_sitrep(self): SitrepDialog(self.iface).exec_()
def run_region(self): RegionDialog(self.iface, self.iface.mapCanvas()).exec_() def run_exercise(self): ExerciseDialog().exec_()
def run_err(self): ErrEditingDialog().exec_()
def run_probability(self): ProbabilityDialog().exec_() def run_route(self): SruRoutingDialog().exec_()
def run_scheme(self): SearchSchemeDialog().exec_() def run_log(self): OperatorLogDialog().exec_()

</code></pre>
<h3>--- FILE: __init__.py ---</h3>
<pre><code>
# -*- coding: utf-8 -*-
&quot;&quot;&quot;–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è QGIS-–ø–ª–∞–≥–∏–Ω–∞ &#x27;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&#x27;&quot;&quot;&quot;

def classFactory(iface):
    &quot;&quot;&quot;–í—ã–∑—ã–≤–∞–µ—Ç—Å—è QGIS –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–ª–∞–≥–∏–Ω–∞&quot;&quot;&quot;
    if iface is None:
        return None
    from .poiskmore import PoiskMorePlugin
    return PoiskMorePlugin(iface)

</code></pre>
<h3>--- FILE: –°–æ–¥–µ—Ä–∂–∏–º–æ–µ_–ø—Ä–æ–µ–∫—Ç–∞.html ---</h3>
<pre><code>

</code></pre>
<h2>–ö–∞—Ç–∞–ª–æ–≥: config</h2>
<div class="directory">
<h3>--- FILE: config\default.ini ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: controllers</h2>
<div class="directory">
<h3>--- FILE: controllers\assign_sru_by_distance.py ---</h3>
<pre><code>
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ SRU. –ü–æ–ª–Ω—ã–π –∫–æ–¥, —É–ª—É—á—à–µ–Ω:
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ QgsSpatialIndex –¥–ª—è
—Å–∫–æ—Ä–æ—Å—Ç–∏.
from qgis.core import QgsVectorLayer, QgsFeatureIterator, QgsSpatialIndex, 
QgsPointXY, QgsFeature
from PyQt5.QtWidgets import QMessageBox
def assign_sru_by_distance(region_layer: QgsVectorLayer, sru_layer: QgsVectorLayer):
sru_index = QgsSpatialIndex(sru_layer.getFeatures())
for region_feat in region_layer.getFeatures():
region_centroid = region_feat.geometry().centroid()
nearest_ids = sru_index.nearestNeighbor(region_centroid, 1)
if nearest_ids:
nearest_feat = sru_layer.getFeature(nearest_ids[0])
region_feat.setAttribute(&quot;assigned_sru&quot;, nearest_feat.attribute(&quot;name&quot;))
region_layer.updateFeature(region_feat)
else:
QMessageBox.warning(None, &quot;–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ&quot;, &quot;–ù–µ—Ç –±–ª–∏–∂–∞–π—à–∏—Ö SRU –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞ 
ID &quot; + str(region_feat.id()))
region_layer.commitChanges()

</code></pre>
<h3>--- FILE: controllers\heatmap_drawer.py ---</h3>
<pre><code>
–û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã. –ó–∞–º–µ–Ω–µ–Ω–∞
–∑–∞–≥–ª—É—à–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
QgsHeatmapRenderer.
from qgis.core import QgsHeatmapRenderer, QgsStyle, QgsVectorLayer, QgsProject
def draw_heatmap(layer: QgsVectorLayer):
renderer = QgsHeatmapRenderer()
renderer.setRadius(5)
renderer.setRenderQuality(3)
renderer.setColorRamp(QgsStyle.defaultStyle().colorRamp(&quot;Reds&quot;))
layer.setRenderer(renderer)
layer.triggerRepaint()
QgsProject.instance().addMapLayer(layer)

</code></pre>
<h3>--- FILE: controllers\probability_generator.py ---</h3>
<pre><code>
from qgis.core import QgsVectorLayer, QgsFeature, QgsGeometry, QgsPointXY, QgsField
from PyQt5.QtCore import QVariant
import random
import math
from qgis.core import QgsProject

def calculate_drift(lat, lon, wind_speed_ms, wind_dir_deg, time_hours, current_speed_ms=0, current_dir_deg=0):
    # –î—Ä–µ–π—Ñ –ø–æ –≤–µ—Ç—Ä—É (~3% —Å–∫–æ—Ä–æ—Å—Ç–∏, IAMSAR)
    drift_speed_wind_kmh = wind_speed_ms * 3.6 * 0.03
    drift_dist_wind_km = drift_speed_wind_kmh * time_hours
    dx_wind = drift_dist_wind_km * math.sin(math.radians(wind_dir_deg)) / (111 * math.cos(math.radians(lat)))
    dy_wind = drift_dist_wind_km * math.cos(math.radians(wind_dir_deg)) / 111

    # –î—Ä–µ–π—Ñ –ø–æ —Ç–µ—á–µ–Ω–∏—é (–ø–æ–ª–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
    drift_speed_current_kmh = current_speed_ms * 3.6
    drift_dist_current_km = drift_speed_current_kmh * time_hours
    dx_current = drift_dist_current_km * math.sin(math.radians(current_dir_deg)) / (111 * math.cos(math.radians(lat)))
    dy_current = drift_dist_current_km * math.cos(math.radians(current_dir_deg)) / 111

    new_lat = lat + dy_wind + dy_current
    new_lon = lon + dx_wind + dx_current
    return new_lat, new_lon

def generate_probability_points(center: QgsPointXY, radius, count, wind_speed_ms=6, wind_dir_deg=45, time_hours=2, current_speed_ms=0, current_dir_deg=0):
    random.seed(42)
    new_lat, new_lon = calculate_drift(center.y(), center.x(), wind_speed_ms, wind_dir_deg, time_hours, current_speed_ms, current_dir_deg)
    drifted_center = QgsPointXY(new_lon, new_lat)

    layer = QgsVectorLayer(&quot;Point?crs=EPSG:4326&quot;, &quot;Probability Points&quot;, &quot;memory&quot;)
    pr = layer.dataProvider()
    pr.addAttributes([QgsField(&quot;prob&quot;, QVariant.Double)])
    layer.updateFields()

    feats = []
    for _ in range(count):
        angle = random.uniform(0, 2 * math.pi)
        dist = random.uniform(0, radius)
        dx = dist * math.cos(angle)
        dy = dist * math.sin(angle)
        pt = QgsPointXY(drifted_center.x() + dx, drifted_center.y() + dy)
        feat = QgsFeature()
        feat.setGeometry(QgsGeometry.fromPointXY(pt))
        feat.setAttributes([random.uniform(0, 1)])
        feats.append(feat)

    pr.addFeatures(feats)
    layer.updateExtents()
    QgsProject.instance().addMapLayer(layer)
    return layer

</code></pre>
<h3>--- FILE: controllers\region_create.py ---</h3>
<pre><code>
–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π ESB. –£–ª—É—á—à–µ–Ω: –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞ —á–µ—Ä–µ–∑ ESB –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è.
from qgis.core import QgsVectorLayer, QgsFeature, QgsGeometry, QgsField from PyQt5.QtCore import QVariant from qgis.core import QgsProject from ..esb.esb_integration import send_message_via_esb
def create_region(name, start_time, daylight_duration): layer = QgsVectorLayer(&quot;Polygon?crs=EPSG:4326&quot;, name, &quot;memory&quot;) pr = layer.dataProvider() pr.addAttributes([QgsField(&quot;name&quot;, QVariant.String), QgsField(&quot;start_time&quot;, QVariant.String), QgsField(&quot;daylight&quot;, QVariant.Double)]) layer.updateFields()
feature = QgsFeature() geom = QgsGeometry.fromRect(QgsProject.instance().mapSettings().extent()) # –ü—Ä–∏–º–µ—Ä –æ—Ç extent feature.setGeometry(geom) feature.setAttributes([name, start_time, daylight_duration]) pr.addFeature(feature) layer.updateExtents() QgsProject.instance().addMapLayer(layer)
–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ ESB
data = {&quot;name&quot;: name, &quot;start_time&quot;: start_time, &quot;daylight&quot;: daylight_duration} send_message_via_esb({&quot;type&quot;: &quot;REGION_CREATED&quot;, &quot;data&quot;: data})
return layer
üîπ –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π –Ω–∞ MySQL/ESB) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 4/5
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–µ—Ç–æ–¥–∏–∫–∏: –ë–µ—Ä—É –ø—Ä–∏–º–µ—Ä –∏–∑ &quot;–ú–µ—Ç–æ–¥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ü–æ–∏—Å–∫ –º–æ—Ä–µ.docx&quot; (—Ä–∞—Å—á–µ—Ç –¥—Ä–µ–π—Ñ–∞: LKP, –≤–µ—Ç–µ—Ä, —Ç–µ—á–µ–Ω–∏–µ). –¢–µ—Å—Ç–∏—Ä—É—é –≤ code_execution: –°–∏–º—É–ª–∏—Ä—É—é —Ä–∞—Å—á–µ—Ç –¥—Ä–µ–π—Ñ–∞ –ø–æ –≤–µ—Ç—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, LKP 60,30; –≤–µ—Ç–µ—Ä 6 m/s NE; –≤—Ä–µ–º—è 2 —á). –†–µ–∑—É–ª—å—Ç–∞—Ç: LKP —Å–¥–≤–∏–≥ ~0.04 –≥—Ä–∞–¥. (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç ~4.4 –∫–º –Ω–∞ 60 —à–∏—Ä–æ—Ç–µ). –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É—é –≤ probability_generator.py –¥–ª—è POC —Å –¥—Ä–µ–π—Ñ–æ–º. –£–ª—É—á—à–µ–Ω–∏—è: –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –≤ test_probability_map.py —Å –¥—Ä–µ–π—Ñ–æ–º.
üîπ –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π –Ω–∞ MySQL/ESB) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 5/5
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –º–µ—Ç–æ–¥–∏–∫–∏: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª code_execution –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥—Ä–µ–π—Ñ–∞ (–ø—Ä–∏–º–µ—Ä: LKP 60,30; –≤–µ—Ç–µ—Ä 6 m/s NE; –≤—Ä–µ–º—è 2 —á ‚Üí –Ω–æ–≤—ã–π LKP ~60.008,30.017 ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç IAMSAR ~3% —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–µ—Ç—Ä–∞). –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª –≤ probability_generator.py (–¥–æ–±–∞–≤–ª–µ–Ω drift_calc). –£–ª—É—á—à–µ–Ω–∏—è: –¢–µ—Å—Ç –≤ test_probability_map.py —Å –¥—Ä–µ–π—Ñ–æ–º. –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: MySQL/ESB –¥–æ–±–∞–≤–ª–µ–Ω—ã, –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–æ–ª–Ω–æ–π –∑–∞–º–µ–Ω–µ C# (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Ç–æ–¥–∏–∫–µ: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, —Ä–∞—Å—á–µ—Ç LKP/—Ä–∞–π–æ–Ω–æ–≤/–¥—Ä–µ–π—Ñ–∞, —Å—Ö–µ–º—ã, SITREP —á–µ—Ä–µ–∑ ESB).
 CopyEdit 
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π —Å —Ä–∞—Å—á–µ—Ç–æ–º –¥—Ä–µ–π—Ñ–∞. –£–ª—É—á—à–µ–Ω: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥—Ä–µ–π—Ñ–∞ –ø–æ –≤–µ—Ç—Ä—É/—Ç–µ—á–µ–Ω–∏—é –∏–∑ –º–µ—Ç–æ–¥–∏–∫–∏.
from qgis.core import QgsVectorLayer, QgsFeature, QgsGeometry, QgsPointXY, QgsField from PyQt5.QtCore import QVariant import random import math
def calculate_drift(lat, lon, wind_speed_ms, wind_dir_deg, time_hours, current_speed_ms=0, current_dir_deg=0):
–î—Ä–µ–π—Ñ –ø–æ –≤–µ—Ç—Ä—É (~3% —Å–∫–æ—Ä–æ—Å—Ç–∏, IAMSAR)
drift_speed_wind_kmh = wind_speed_ms * 3.6 * 0.03 drift_dist_wind_km = drift_speed_wind_kmh * time_hours dx_wind = drift_dist_wind_km * math.sin(math.radians(wind_dir_deg)) / (111 * math.cos(math.radians(lat))) dy_wind = drift_dist_wind_km * math.cos(math.radians(wind_dir_deg)) / 111
–î—Ä–µ–π—Ñ –ø–æ —Ç–µ—á–µ–Ω–∏—é (–ø–æ–ª–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
drift_speed_current_kmh = current_speed_ms * 3.6 drift_dist_current_km = drift_speed_current_kmh * time_hours dx_current = drift_dist_current_km * math.sin(math.radians(current_dir_deg)) / (111 * math.cos(math.radians(lat))) dy_current = drift_dist_current_km * math.cos(math.radians(current_dir_deg)) / 111
new_lat = lat + dy_wind + dy_current new_lon = lon + dx_wind + dx_current return new_lat, new_lon
def generate_probability_points(center: QgsPointXY, radius, count, wind_speed_ms=6, wind_dir_deg=45, time_hours=2, current_speed_ms=0, current_dir_deg=0): random.seed(42)
–ü—Ä–∏–º–µ–Ω—è–µ–º –¥—Ä–µ–π—Ñ –∫ —Ü–µ–Ω—Ç—Ä—É
new_lat, new_lon = calculate_drift(center.y(), center.x(), wind_speed_ms, wind_dir_deg, time_hours, current_speed_ms, current_dir_deg) drifted_center = QgsPointXY(new_lon, new_lat)
layer = QgsVectorLayer(&quot;Point?crs=EPSG:4326&quot;, &quot;Probability Points&quot;, &quot;memory&quot;) pr = layer.dataProvider() pr.addAttributes([QgsField(&quot;prob&quot;, QVariant.Double)]) layer.updateFields()
feats = [] for _ in range(count): angle = random.uniform(0, 2 * math.pi) dist = random.uniform(0, radius) dx = dist * math.cos(angle) dy = dist * math.sin(angle) pt = QgsPointXY(drifted_center.x() + dx, drifted_center.y() + dy) feat = QgsFeature() feat.setGeometry(QgsGeometry.fromPointXY(pt)) feat.setAttributes([random.uniform(0, 1)]) feats.append(feat)
pr.addFeatures(feats) layer.updateExtents() QgsProject.instance().addMapLayer(layer) return layer

</code></pre>
<h3>--- FILE: controllers\search_scheme.py ---</h3>
<pre><code>
from qgis.core import QgsFeature, QgsGeometry, QgsPointXY

def create_search_scheme_layer(points, crs):
    interpolated = []
    for i in range(len(points) - 1):
        start = points[i]
        end = points[i + 1]
        steps = 10
        for s in range(steps):
            x = start.x() + (end.x() - start.x()) * s / steps
            y = start.y() + (end.y() - start.y()) * s / steps
            interpolated.append(QgsPointXY(x, y))
    interpolated.append(points[-1])
    geom = QgsGeometry.fromPolylineXY(interpolated)
    return geom

</code></pre>
<h3>--- FILE: controllers\search_scheme_draw.py ---</h3>
<pre><code>
–û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ö–µ–º –ø–æ–∏—Å–∫–∞. –£–ª—É—á—à–µ–Ω:
–î–æ–±–∞–≤–ª–µ–Ω spatial index –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
—Ü–µ–Ω—Ç—Ä–∞; –ø–æ–ª–Ω—ã–π –∏–º–ø–æ—Ä—Ç.
from qgis.core import QgsVectorLayer, QgsProject, QgsPointXY, QgsSpatialIndex
from qgis.gui import QgsMapCanvas
from .search_scheme import create_expanding_square, save_search_geometry
def draw_search_scheme(canvas: QgsMapCanvas, spacing: float, legs: int):
layer = QgsVectorLayer(&quot;LineString?crs=EPSG:4326&quot;, &quot;Search Scheme&quot;, &quot;memory&quot;)
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ index –¥–ª—è
—Ü–µ–Ω—Ç—Ä–∞, –µ—Å–ª–∏ –µ—Å—Ç—å —Å–ª–æ–∏
center = canvas.extent().center()
coords = create_expanding_square(center, spacing, legs)
points = [QgsPointXY(x, y) for x, y in coords]
save_search_geometry(layer, points)
QgsProject.instance().addMapLayer(layer)

</code></pre>
<h3>--- FILE: controllers\sru_route_draw.py ---</h3>
<pre><code>
–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ SRU. –£–ª—É—á—à–µ–Ω:
–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π –º–∞—Ä—à—Ä—É—Ç.
from qgis.core import QgsProject, QgsVectorLayer
from .sru_routing import calculate_sru_route, add_route_to_layer
from PyQt5.QtWidgets import QMessageBox
def draw_route(canvas, start, end):
route = calculate_sru_route(start, end)
if not route:
QMessageBox.warning(canvas.parent(), &quot;–û—à–∏–±–∫–∞&quot;, &quot;–ú–∞—Ä—à—Ä—É—Ç –ø—É—Å—Ç–æ–π!&quot;)
return
layer = QgsVectorLayer(&quot;LineString?crs=EPSG:4326&quot;, &quot;SRU Route&quot;, &quot;memory&quot;)
add_route_to_layer(layer, route)
QgsProject.instance().addMapLayer(layer)

</code></pre>
<h3>--- FILE: controllers\sru_routing.py ---</h3>
<pre><code>
from qgis.core import QgsFeature, QgsGeometry, QgsPointXY

def build_route(start_point, end_point):
    steps = 10
    route = []
    for i in range(steps + 1):
        x = start_point.x() + (end_point.x() - start_point.x()) * i / steps
        y = start_point.y() + (end_point.y() - start_point.y()) * i / steps
        route.append(QgsPointXY(x, y))
    return QgsGeometry.fromPolylineXY(route)

</code></pre>
<h3>--- FILE: controllers\zone_intersection.py ---</h3>
<pre><code>
–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –∑–æ–Ω. –£–ª—É—á—à–µ–Ω: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
QgsSpatialIndex –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
from qgis.core import QgsVectorLayer, QgsSpatialIndex, QgsFeature
def check_zone_intersections(layer1: QgsVectorLayer, layer2: QgsVectorLayer):
index = QgsSpatialIndex(layer2.getFeatures())
intersections = []
for feat1 in layer1.getFeatures():
candidates = index.intersects(feat1.geometry().boundingBox())
for cand_id in candidates:
feat2 = layer2.getFeature(cand_id)
if feat1.geometry().intersects(feat2.geometry()):
intersections.append((feat1.id(), feat2.id()))
return intersections

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: data</h2>
<div class="directory">
<h3>--- FILE: data\boundaries.geojson ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: data\districts.geojson ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: data\russian_seas.geojson ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: data\sample_err.xml ---</h3>
<pre><code>
&lt;incidents&gt; &lt;incident&gt; &lt;id&gt;ERR001&lt;/id&gt; &lt;datetime&gt;2025-07-22 09:15:00&lt;/datetime&gt;
&lt;description&gt;–û—Ç–∫–∞–∑ –¥–≤–∏–≥–∞—Ç–µ–ª—è –Ω–∞ –±–æ—Ä—Ç—É —Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å—É–¥–Ω–∞&lt;/description&gt;
&lt;/incident&gt; &lt;/incidents&gt;
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 11/16 (–≤—Ç–æ—Ä–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ. sru_routing.py: –ó–∞–≥–ª—É—à–∫–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ 
—Ä–µ–∞–ª—å–Ω—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é —Å —à–∞–≥–∞–º–∏; –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏. 
test_sru.geojson: –í–∞–ª–∏–¥–µ–Ω, –¥–æ–±–∞–≤–ª–µ–Ω–∞ CRS. test_zones.geojson: –í–∞–ª–∏–¥–µ–Ω, 
–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª–Ω—ã–µ. –ü–æ—Ä—è–¥–æ–∫: sru_routing.py ‚Äî —Ä–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞; –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ 
–¥–∏–∞–ª–æ–≥–∞.
plaintext
CopyEdit

</code></pre>
<h3>--- FILE: data\test_sru.geojson ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: data\test_zones.geojson ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: db</h2>
<div class="directory">
<h3>--- FILE: db\incident_storage.py ---</h3>
<pre><code>
–•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –≤ JSON. –£–ª—É—á—à–µ–Ω:
Try-except –¥–ª—è –æ—à–∏–±–æ–∫ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏.
import json
import os
def save_incident_to_json(data, path=&quot;incident_log.json&quot;):
try:
if os.path.exists(path):
with open(path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
all_data = json.load(f)
else:
all_data = []
all_data.append(data)
with open(path, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
json.dump(all_data, f, ensure_ascii=False, indent=2)
except (json.JSONDecodeError, IOError) as e:
print(f&quot;–û—à–∏–±–∫–∞ JSON: {e}&quot;)
def load_all_incidents(path=&quot;incident_log.json&quot;):
try:
if os.path.exists(path):
with open(path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
return json.load(f)
return []
except json.JSONDecodeError as e:
print(f&quot;–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON: {e}&quot;)
return []
‚úÖ
 –ì—Ä—É–ø–ø–∞ 3 –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ü–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω. 
ZIP –¥–ª—è –≥—Ä—É–ø–ø—ã 3 –≥–æ—Ç–æ–≤.
üì¶
 poiskmore_group3.zip ‚Äî —Å–∫–∞—á–∞—Ç—å
(–õ–µ–Ω—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è —Ç—Ä–µ—Ö –≥—Ä—É–ø–ø; –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–ª—å—à–µ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –≤ —á–∞—Ç–µ.)
–≤–æ—Ç 4-–∞—è –≥—Ä—É–ø–ø–∞, –ø—Ä–æ—Å—å–±–∞ - –∞ –∂–µ –ø–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å 
–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–ª–Ω–æ
bearing_calc.py install_instructions.txt sru_routing_dialog.py
search_scheme_dialog.py sitrep_dialog.py functional_blocks.md
util_coord.py test_exercise_input.json region_dialog.py
test_sitrep_input.json
–í—ã–ø–æ–ª–Ω–µ–Ω–æ ¬∑ GROK 4 HEAVY ¬∑ 5M 16S
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 17/32 (—á–µ—Ç–≤–µ—Ä—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –∞–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ê–Ω–∞–ª–∏–∑ —á–µ—Ç–≤–µ—Ä—Ç–æ–π –≥—Ä—É–ø–ø—ã —Ñ–∞–π–ª–æ–≤ (bearing_calc.py, 
install_instructions.txt, functional_blocks.md, region_dialog.py, 
search_scheme_dialog.py, sitrep_dialog.py, sru_routing_dialog.py, 
test_sitrep_input.json, util_coord.py, test_exercise_input.json). –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: –í—Å–µ 
–∫–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å –ø–æ–º–æ—â—å—é code_execution (—Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω 
–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –±–µ–∑ –æ—à–∏–±–æ–∫; –¥–ª—è Python ‚Äî –∏–º–ø–æ—Ä—Ç math –∏ —Ç.–¥. —Ä–∞–±–æ—Ç–∞–µ—Ç). 
–Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Å Qt5 –≤ QGIS 3.40.9 ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ PyQt5. functional_blocks.md 
–∏–º–µ–µ—Ç &quot;...&quot; ‚Äî –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏. 
(–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ code_execution —Å json.loads). bearing_calc.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ 
–Ω—É–ª–µ–≤—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é. util_coord.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫. –í—Å–µ —Ñ–∞–π–ª—ã 
–æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É (—Ä–∞—Å—á–µ—Ç—ã, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –¥–∏–∞–ª–æ–≥–∏, —Ç–µ—Å—Ç–æ–≤—ã–µ 
–¥–∞–Ω–Ω—ã–µ). –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–∏–∞–ª–æ–≥–∏ (–¥–æ–±–∞–≤–ª–µ–Ω—ã –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã). 
–ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: bearing_calc.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏; 
–¥–∏–∞–ª–æ–≥–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ –º–µ–Ω—é; JSON –¥–ª—è —Ç–µ—Å—Ç–æ–≤.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
CopyEdit

</code></pre>
<h3>--- FILE: db\load_db_to_table.py ---</h3>
<pre><code>
–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î –≤ —Ç–∞–±–ª–∏—Ü—É. –£–ª—É—á—à–µ–Ω:
–î–æ–±–∞–≤–ª–µ–Ω–∞ try-except, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ with
–¥–ª—è conn.
import sqlite3
def fetch_all_from_db(db_path):
try:
with sqlite3.connect(db_path) as conn:
c = conn.cursor()
c.execute(&quot;SELECT id, datetime, description FROM incidents&quot;)
rows = c.fetchall()
return rows
except sqlite3.Error as e:
print(f&quot;–û—à–∏–±–∫–∞ –ë–î: {e}&quot;)
return []

</code></pre>
<h3>--- FILE: db\mysql_storage.py ---</h3>
<pre><code>
import mysql.connector
from qgis.core import QgsMessageLog
import json

def store_incident(incident_data):
    &quot;&quot;&quot;–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ –≤ MySQL —Å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π JSON.&quot;&quot;&quot;
    try:
        conn = mysql.connector.connect(
            host=&#x27;localhost&#x27;,
            user=&#x27;root&#x27;,
            password=&#x27;&#x27;,
            database=&#x27;poiskmore&#x27;
        )
        cursor = conn.cursor()
        query = &quot;&quot;&quot;
            INSERT INTO incidents (data, created_at)
            VALUES (%s, NOW())
            ON DUPLICATE KEY UPDATE data=VALUES(data), created_at=NOW()
        &quot;&quot;&quot;
        cursor.execute(query, (json.dumps(incident_data),))
        conn.commit()
        return cursor.lastrowid
    except mysql.connector.Error as e:
        QgsMessageLog.logMessage(f&quot;–û—à–∏–±–∫–∞ MySQL: {e}&quot;, &quot;PoiskMore&quot;, Qgis.Critical)
        return -1
    finally:
        if conn.is_connected():
            cursor.close()
            conn.close()

def update_incident(incident_id, incident_data):
    &quot;&quot;&quot;–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞.&quot;&quot;&quot;
    try:
        conn = mysql.connector.connect(
            host=&#x27;localhost&#x27;,
            user=&#x27;root&#x27;,
            password=&#x27;&#x27;,
            database=&#x27;poiskmore&#x27;
        )
        cursor = conn.cursor()
        query = &quot;UPDATE incidents SET data = %s, updated_at = NOW() WHERE id = %s&quot;
        cursor.execute(query, (json.dumps(incident_data), incident_id))
        conn.commit()
        return cursor.rowcount &gt; 0
    except mysql.connector.Error as e:
        QgsMessageLog.logMessage(f&quot;–û—à–∏–±–∫–∞ MySQL: {e}&quot;, &quot;PoiskMore&quot;, Qgis.Critical)
        return False
    finally:
        if conn.is_connected():
            cursor.close()
            conn.close()

</code></pre>
<h3>--- FILE: db\orm_xml_to_db.py ---</h3>
<pre><code>
–ò–º–ø–æ—Ä—Ç XML –≤ MySQL. –£–ª—É—á—à–µ–Ω: Try-except, –ø—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ MySQL.
import mysql.connector import xml.etree.ElementTree as ET from mysql.connector import Error
def xml_to_mysql(xml_path, host=&#x27;localhost&#x27;, user=&#x27;root&#x27;, password=&#x27;password&#x27;, db=&#x27;poiskmore&#x27;): try: tree = ET.parse(xml_path) root = tree.getroot()
conn = mysql.connector.connect(host=host, user=user, password=password, database=db) c = conn.cursor() c.execute(&quot;&quot;&quot; CREATE TABLE IF NOT EXISTS incidents ( id VARCHAR(255), datetime VARCHAR(255), description TEXT ) &quot;&quot;&quot;)
for item in root.findall(&quot;.//incident&quot;): id_ = item.findtext(&quot;id&quot;) dt = item.findtext(&quot;datetime&quot;) desc = item.findtext(&quot;description&quot;) if id_ and dt and desc: c.execute(&quot;INSERT INTO incidents VALUES (%s, %s, %s)&quot;, (id_, dt, desc))
conn.commit() conn.close() except ET.ParseError as e: print(f&quot;–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞: {e}&quot;) except Error as e: print(f&quot;–û—à–∏–±–∫–∞ MySQL: {e}&quot;)

</code></pre>
<h3>--- FILE: db\training_db.py ---</h3>
<pre><code>
import mysql.connector
from qgis.core import QgsMessageLog
import configparser

config = configparser.ConfigParser()
config.read(&#x27;config/default.ini&#x27;)
db_config = {
    &#x27;host&#x27;: config.get(&#x27;MySQL&#x27;, &#x27;host&#x27;, fallback=&#x27;localhost&#x27;),
    &#x27;user&#x27;: config.get(&#x27;MySQL&#x27;, &#x27;user&#x27;, fallback=&#x27;root&#x27;),
    &#x27;password&#x27;: config.get(&#x27;MySQL&#x27;, &#x27;password&#x27;, fallback=&#x27;&#x27;),
    &#x27;database&#x27;: config.get(&#x27;MySQL&#x27;, &#x27;database&#x27;, fallback=&#x27;poiskmore&#x27;)
}

def save_training_data(incident_id, lat, lon, timestamp, status):
    &quot;&quot;&quot;–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–π –≤ MySQL.&quot;&quot;&quot;
    try:
        conn = mysql.connector.connect(**db_config)
        cursor = conn.cursor()
        query = &quot;&quot;&quot;
            INSERT INTO training_data (incident_id, latitude, longitude, timestamp, status)
            VALUES (%s, %s, %s, %s, %s)
            ON DUPLICATE KEY UPDATE latitude=VALUES(latitude), longitude=VALUES(longitude),
            timestamp=VALUES(timestamp), status=VALUES(status)
        &quot;&quot;&quot;
        cursor.execute(query, (incident_id, lat, lon, timestamp, status))
        conn.commit()
    except mysql.connector.Error as e:
        QgsMessageLog.logMessage(f&quot;–û—à–∏–±–∫–∞ MySQL: {e}&quot;, &quot;PoiskMore&quot;, Qgis.Critical)
        return False
    finally:
        if conn.is_connected():
            cursor.close()
            conn.close()
    return True

def get_training_data(incident_id):
    &quot;&quot;&quot;–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–π –ø–æ incident_id.&quot;&quot;&quot;
    try:
        conn = mysql.connector.connect(**db_config)
        cursor = conn.cursor()
        query = &quot;SELECT * FROM training_data WHERE incident_id = %s&quot;
        cursor.execute(query, (incident_id,))
        return cursor.fetchall()
    except mysql.connector.Error as e:
        QgsMessageLog.logMessage(f&quot;–û—à–∏–±–∫–∞ MySQL: {e}&quot;, &quot;PoiskMore&quot;, Qgis.Critical)
        return []
    finally:
        if conn.is_connected():
            cursor.close()
            conn.close()

</code></pre>
<h3>--- FILE: db\xml_loader.py ---</h3>
<pre><code>
–ó–∞–≥—Ä—É–∑–∫–∞ XML. –£–ª—É—á—à–µ–Ω: –î–æ–±–∞–≤–ª–µ–Ω–∞ try-
except, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
import xml.etree.ElementTree as ET
def load_incidents_from_xml(path):
try:
tree = ET.parse(path)
root = tree.getroot()
incidents = []
for item in root.findall(&quot;.//incident&quot;):
inc = {
&quot;id&quot;: item.findtext(&quot;id&quot;, &quot;&quot;),
&quot;datetime&quot;: item.findtext(&quot;datetime&quot;, &quot;&quot;),
&quot;description&quot;: item.findtext(&quot;description&quot;, &quot;&quot;)
}
if all(inc.values()):  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É
incidents.append(inc)
return incidents
except ET.ParseError as e:
print(f&quot;–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ XML: {e}&quot;)
return []

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: dialogs</h2>
<div class="directory">
<h3>--- FILE: dialogs\err_editing_dialog.py ---</h3>
<pre><code>
–î–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ERR. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
from PyQt5.QtWidgets import (
QDialog, QLabel, QLineEdit, QTextEdit, QPushButton, QVBoxLayout, QDateTimeEdit
)
from PyQt5.QtCore import QDateTime
class ErrEditingDialog(QDialog):
def init(self):
super().init()
self.setWindowTitle(&quot;–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è&quot;)
layout = QVBoxLayout()
self.id_edit = QLineEdit()
self.datetime_edit = QDateTimeEdit(QDateTime.currentDateTime())
self.location_edit = QLineEdit()
self.description_edit = QTextEdit()
layout.addWidget(QLabel(&quot;ID –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è:&quot;))
layout.addWidget(self.id_edit)
layout.addWidget(QLabel(&quot;–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:&quot;))
layout.addWidget(self.datetime_edit)
layout.addWidget(QLabel(&quot;–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (lat/lon):&quot;))
layout.addWidget(self.location_edit)
layout.addWidget(QLabel(&quot;–û–ø–∏—Å–∞–Ω–∏–µ:&quot;))
layout.addWidget(self.description_edit)
self.save_button = QPushButton(&quot;–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è&quot;)
self.save_button.clicked.connect(self.accept)
layout.addWidget(self.save_button)
self.setLayout(layout)

</code></pre>
<h3>--- FILE: dialogs\exercise_dialog.py ---</h3>
<pre><code>
PyQt5.
from PyQt5.QtWidgets import (
QDialog, QVBoxLayout, QLabel, QLineEdit, QTextEdit, QDateEdit, QPushButton
)
from PyQt5.QtCore import QDate
class ExerciseDialog(QDialog):
def init(self):
super().init()
self.setWindowTitle(&quot;–£—á–µ–Ω–∏–µ / –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞&quot;)
layout = QVBoxLayout()
self.name_edit = QLineEdit()
self.date_edit = QDateEdit(QDate.currentDate())
self.region_edit = QLineEdit()
self.units_edit = QTextEdit()
self.scenario_edit = QTextEdit()
layout.addWidget(QLabel(&quot;–ù–∞–∑–≤–∞–Ω–∏–µ —É—á–µ–Ω–∏—è:&quot;))
layout.addWidget(self.name_edit)
layout.addWidget(QLabel(&quot;–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:&quot;))
layout.addWidget(self.date_edit)
layout.addWidget(QLabel(&quot;–†–∞–π–æ–Ω –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:&quot;))
layout.addWidget(self.region_edit)
layout.addWidget(QLabel(&quot;–ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–ª—ã –∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ (SRU):&quot;))
layout.addWidget(self.units_edit)
layout.addWidget(QLabel(&quot;–°—Ü–µ–Ω–∞—Ä–∏–π:&quot;))
layout.addWidget(self.scenario_edit)
self.ok_button = QPushButton(&quot;–°–æ—Ö—Ä–∞–Ω–∏—Ç—å&quot;)
self.ok_button.clicked.connect(self.accept)
layout.addWidget(self.ok_button)
self.setLayout(layout)

</code></pre>
<h3>--- FILE: dialogs\log_summary_dialog.py ---</h3>
<pre><code>
–î–∏–∞–ª–æ–≥ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ –ª–æ–≥–∞. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
from PyQt5.QtWidgets import QDialog, QVBoxLayout, QTextEdit, QPushButton
import os
from ..reports.log_summary_generator import generate_log_summary
class LogSummaryDialog(QDialog):
def init(self):
super().init()
self.setWindowTitle(&quot;–°–≤–æ–¥–∫–∞ –ø–æ –ª–æ–≥–∞–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞&quot;)
layout = QVBoxLayout()
self.text = QTextEdit()
self.text.setReadOnly(True)
layout.addWidget(self.text)
self.button = QPushButton(&quot;–û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–¥–∫—É&quot;)
self.button.clicked.connect(self.update)
layout.addWidget(self.button)
self.setLayout(layout)
self.update()
def update(self):
generate_log_summary()
summary_path = &quot;log_summary.txt&quot;
if os.path.exists(summary_path):
with open(summary_path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
self.text.setText(f.read())
else:
self.text.setText(&quot;–°–≤–æ–¥–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä.&quot;)
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 15/16 (—Ç—Ä–µ—Ç—å—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ. orm_xml_to_db.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ try-
orm_xml_to_db.py –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞; operator_log_dialog.py –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 
–ª–æ–≥–∏; probability_dialog.py –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
CopyEdit

</code></pre>
<h3>--- FILE: dialogs\operator_log_dialog.py ---</h3>
<pre><code>
-&gt; PyQt5.
from PyQt5.QtWidgets import QDialog, QVBoxLayout, QTextEdit, QPushButton
import os
class OperatorLogDialog(QDialog):
def init(self, path=&quot;operator_log.txt&quot;):
super().init()
self.setWindowTitle(&quot;–ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞&quot;)
self.layout = QVBoxLayout()
self.text = QTextEdit()
self.text.setReadOnly(True)
self.layout.addWidget(self.text)
self.reload_button = QPushButton(&quot;–û–±–Ω–æ–≤–∏—Ç—å&quot;)
self.reload_button.clicked.connect(self.load_log)
self.layout.addWidget(self.reload_button)
self.setLayout(self.layout)
self.path = path
self.load_log()
def load_log(self):
if os.path.exists(self.path):
with open(self.path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
self.text.setText(f.read())
else:
self.text.setText(&quot;–õ–æ–≥-—Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.&quot;)

</code></pre>
<h3>--- FILE: dialogs\probability_dialog.py ---</h3>
<pre><code>
&gt; PyQt5, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è.
from PyQt5.QtWidgets import QDialog, QVBoxLayout, QLabel, QLineEdit, QSpinBox, 
QPushButton
class ProbabilityDialog(QDialog):
def init(self):
super().init()
self.setWindowTitle(&quot;–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—Ä—Ç—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏&quot;)
layout = QVBoxLayout()
self.radius_edit = QLineEdit()
self.count_spin = QSpinBox()
self.count_spin.setMinimum(10)
self.count_spin.setMaximum(10000)
layout.addWidget(QLabel(&quot;–†–∞–¥–∏—É—Å –æ–±–ª–∞—Å—Ç–∏ (–≥—Ä–∞–¥—É—Å—ã):&quot;))
layout.addWidget(self.radius_edit)
layout.addWidget(QLabel(&quot;–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫:&quot;))
layout.addWidget(self.count_spin)
self.ok_button = QPushButton(&quot;–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å&quot;)
self.ok_button.clicked.connect(self.accept)
layout.addWidget(self.ok_button)
self.setLayout(layout)
def get_parameters(self):
try:
return float(self.radius_edit.text()), self.count_spin.value()
except ValueError:
return 0.0, 10  # –î–µ—Ñ–æ–ª—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 16/16 (—Ç—Ä–µ—Ç—å—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ—Ç—å–µ–π –≥—Ä—É–ø–ø—ã. 
incident_storage.py: –£–ª—É—á—à–µ–Ω ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ try-except –¥–ª—è JSON –æ—à–∏–±–æ–∫, 
ensure_ascii=False —É–∂–µ –µ—Å—Ç—å. –í—Å–µ —Ñ–∞–π–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π. –ù–µ—Ç 
–∑–∞–≥–ª—É—à–µ–∫. –≠—Ç–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ç—Ä–µ—Ç—å—é –≥—Ä—É–ø–ø—É; –ø–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏ 
–≥—Ä—É–ø–ø—ã.
CopyEdit

</code></pre>
<h3>--- FILE: dialogs\region_dialog.py ---</h3>
<pre><code>
PyQt5, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è.
from PyQt5.QtWidgets import QDialog, QVBoxLayout, QLabel, QPushButton, 
QDateTimeEdit, QLineEdit
from PyQt5.QtCore import QDateTime
from PyQt5.QtGui import QDoubleValidator
from ..controllers.region_create import RegionCreateController
from PyQt5.QtWidgets import QMessageBox
class RegionDialog(QDialog):
def init(self, iface, layer_manager):
super().init()
self.setWindowTitle(&quot;–°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–∞ –ø–æ–∏—Å–∫–∞&quot;)
self.controller = RegionCreateController(iface, layer_manager)
self.name_edit = QLineEdit(self)
self.start_time = QDateTimeEdit(QDateTime.currentDateTime(), self)
self.daylight_edit = QLineEdit(self)
validator = QDoubleValidator(0.0, 24.0, 2, self)
self.daylight_edit.setValidator(validator)
layout = QVBoxLayout()
layout.addWidget(QLabel(&quot;–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–∞:&quot;))
layout.addWidget(self.name_edit)
layout.addWidget(QLabel(&quot;–ù–∞—á–∞–ª–æ –æ–ø–µ—Ä–∞—Ü–∏–∏:&quot;))
layout.addWidget(self.start_time)
layout.addWidget(QLabel(&quot;–°–≤–µ—Ç–æ–≤–æ–π –¥–µ–Ω—å (—á):&quot;))
layout.addWidget(self.daylight_edit)
self.ok_button = QPushButton(&quot;–ü–æ—Å—Ç—Ä–æ–∏—Ç—å&quot;, self)
self.ok_button.clicked.connect(self.build_region)
layout.addWidget(self.ok_button)
self.setLayout(layout)
def build_region(self):
name = self.name_edit.text()
start = self.start_time.dateTime()
daylight_text = self.daylight_edit.text()
if not name or not daylight_text:
QMessageBox.warning(self, &quot;–û—à–∏–±–∫–∞&quot;, &quot;–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!&quot;)
return
try:
daylight = float(daylight_text)
self.controller.create_region(name, start, daylight)
self.accept()
except ValueError:
QMessageBox.warning(self, &quot;–û—à–∏–±–∫–∞&quot;, &quot;–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å–≤–µ—Ç–æ–≤–æ–≥–æ –¥–Ω—è!&quot;)

</code></pre>
<h3>--- FILE: dialogs\search_scheme_dialog.py ---</h3>
<pre><code>
PyQt5, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è.
from PyQt5.QtWidgets import QDialog, QVBoxLayout, QLabel, QLineEdit, QPushButton, 
QSpinBox
from PyQt5.QtGui import QDoubleValidator
from PyQt5.QtWidgets import QMessageBox
class SearchSchemeDialog(QDialog):
def init(self):
super().init()
self.setWindowTitle(&quot;–°—Ö–µ–º–∞ –ø–æ–∏—Å–∫–∞ ‚Äî Expanding Square&quot;)
layout = QVBoxLayout()
self.spacing_edit = QLineEdit()
validator = QDoubleValidator(0.1, 100.0, 2, self)
self.spacing_edit.setValidator(validator)
self.legs_spin = QSpinBox()
self.legs_spin.setMinimum(1)
self.legs_spin.setMaximum(20)
layout.addWidget(QLabel(&quot;–®–∞–≥ (spacing), –∫–º:&quot;))
layout.addWidget(self.spacing_edit)
layout.addWidget(QLabel(&quot;–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä–µ–∑–∫–æ–≤:&quot;))
layout.addWidget(self.legs_spin)
self.ok_button = QPushButton(&quot;–ü–æ—Å—Ç—Ä–æ–∏—Ç—å&quot;)
self.ok_button.clicked.connect(self.accept)
layout.addWidget(self.ok_button)
self.setLayout(layout)
def get_parameters(self):
spacing_text = self.spacing_edit.text()
if not spacing_text:
QMessageBox.warning(self, &quot;–û—à–∏–±–∫–∞&quot;, &quot;–£–∫–∞–∂–∏—Ç–µ —à–∞–≥!&quot;)
return None, None
return float(spacing_text), self.legs_spin.value()
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 19/32 (—á–µ—Ç–≤–µ—Ä—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
–¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç QHBoxLayout. sru_routing_dialog.py: 
–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã; sru_routing_dialog.py —Å—Ç—Ä–æ–∏—Ç –º–∞—Ä—à—Ä—É—Ç—ã.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
CopyEdit

</code></pre>
<h3>--- FILE: dialogs\sitrep_dialog.py ---</h3>
<pre><code>
–¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è.
from PyQt5.QtWidgets import (
QDialog, QVBoxLayout, QHBoxLayout, QLabel, QComboBox,
QLineEdit, QTextEdit, QPushButton, QFileDialog, QDateTimeEdit
)
from PyQt5.QtCore import QDateTime
from ..reports.sitrep_generator import generate_sitrep_pdf
from ..reports.sitrep_generator_docx import generate_sitrep_docx
from PyQt5.QtWidgets import QMessageBox
class SitrepDialog(QDialog):
def init(self, iface):
super().init()
self.setWindowTitle(&quot;–î–æ–Ω–µ—Å–µ–Ω–∏–µ SITREP&quot;)
self.iface = iface
layout = QVBoxLayout()
self.type_combo = QComboBox()
self.type_combo.addItems([&quot;INITIAL&quot;, &quot;AMPLIFYING&quot;, &quot;FINAL&quot;])
self.datetime_edit = QDateTimeEdit(QDateTime.currentDateTime())
self.datetime_edit.setDisplayFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;)
self.sru_edit = QLineEdit()
self.coords_edit = QLineEdit()
self.weather_edit = QTextEdit()
self.situation_edit = QTextEdit()
self.actions_edit = QTextEdit()
self.attachment_path = QLineEdit()
self.attach_button = QPushButton(&quot;–í—ã–±—Ä–∞—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ&quot;)
self.attach_button.clicked.connect(self.choose_attachment)
layout.addWidget(QLabel(&quot;–¢–∏–ø:&quot;)); layout.addWidget(self.type_combo)
layout.addWidget(QLabel(&quot;–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:&quot;)); layout.addWidget(self.datetime_edit)
layout.addWidget(QLabel(&quot;SRU:&quot;)); layout.addWidget(self.sru_edit)
layout.addWidget(QLabel(&quot;–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:&quot;)); layout.addWidget(self.coords_edit)
layout.addWidget(QLabel(&quot;–ü–æ–≥–æ–¥–∞:&quot;)); layout.addWidget(self.weather_edit)
layout.addWidget(QLabel(&quot;–°–∏—Ç—É–∞—Ü–∏—è:&quot;)); layout.addWidget(self.situation_edit)
layout.addWidget(QLabel(&quot;–î–µ–π—Å—Ç–≤–∏—è:&quot;)); layout.addWidget(self.actions_edit)
layout.addWidget(QLabel(&quot;–í–ª–æ–∂–µ–Ω–∏–µ:&quot;)); layout.addWidget(self.attachment_path)
layout.addWidget(self.attach_button)
self.btn_pdf = QPushButton(&quot;PDF&quot;)
self.btn_docx = QPushButton(&quot;DOCX&quot;)
self.btn_pdf.clicked.connect(self.generate_pdf)
self.btn_docx.clicked.connect(self.generate_docx)
btns = QHBoxLayout()
btns.addWidget(self.btn_pdf)
btns.addWidget(self.btn_docx)
layout.addLayout(btns)
self.setLayout(layout)
def choose_attachment(self):
path = QFileDialog.getOpenFileName(self, &quot;–§–∞–π–ª&quot;)[0]
if path:
self.attachment_path.setText(path)
def collect_data(self):
data = {
&quot;type&quot;: self.type_combo.currentText(),
&quot;datetime&quot;: self.datetime_edit.dateTime().toString(&quot;yyyy-MM-dd HH:mm:ss&quot;),
&quot;sru&quot;: self.sru_edit.text(),
&quot;coords&quot;: self.coords_edit.text(),
&quot;attachment&quot;: self.attachment_path.text()
}
if not data[&quot;type&quot;] or not data[&quot;datetime&quot;] or not data[&quot;sru&quot;]:
QMessageBox.warning(self, &quot;–û—à–∏–±–∫–∞&quot;, &quot;–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!&quot;)
return None
return data
def generate_pdf(self):
data = self.collect_data()
if data:
generate_sitrep_pdf(data)
def generate_docx(self):
data = self.collect_data()
if data:
generate_sitrep_docx(data)

</code></pre>
<h3>--- FILE: dialogs\sru_routing_dialog.py ---</h3>
<pre><code>
-&gt; PyQt5, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è.
from PyQt5.QtWidgets import QDialog, QVBoxLayout, QLabel, QLineEdit, QPushButton
from qgis.core import QgsPointXY
from PyQt5.QtWidgets import QMessageBox
from PyQt5.QtGui import QRegExpValidator
from PyQt5.QtCore import QRegExp
class SruRoutingDialog(QDialog):
def init(self):
super().init()
self.setWindowTitle(&quot;–ú–∞—Ä—à—Ä—É—Ç SRU&quot;)
layout = QVBoxLayout()
self.start_edit = QLineEdit()
validator = QRegExpValidator(QRegExp(r&#x27;^-?\d+.?\d*,\s*-?\d+.?\d*$&#x27;), self)
self.start_edit.setValidator(validator)
self.end_edit = QLineEdit()
self.end_edit.setValidator(validator)
layout.addWidget(QLabel(&quot;–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—Ç–∞—Ä—Ç–∞ (x,y):&quot;))
layout.addWidget(self.start_edit)
layout.addWidget(QLabel(&quot;–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–ª–∏ (x,y):&quot;))
layout.addWidget(self.end_edit)
self.ok_button = QPushButton(&quot;–ü–æ—Å—Ç—Ä–æ–∏—Ç—å&quot;)
self.ok_button.clicked.connect(self.accept)
layout.addWidget(self.ok_button)
self.setLayout(layout)
def get_points(self):
if not self.start_edit.hasAcceptableInput() or not self.end_edit.hasAcceptableInput():
QMessageBox.warning(self, &quot;–û—à–∏–±–∫–∞&quot;, &quot;–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç!&quot;)
return None, None
x1, y1 = map(float, self.start_edit.text().split(&quot;,&quot;))
x2, y2 = map(float, self.end_edit.text().split(&quot;,&quot;))
return QgsPointXY(x1, y1), QgsPointXY(x2, y2)
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 20/32 (—á–µ—Ç–≤–µ—Ä—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ç–≤–µ—Ä—Ç–æ–π –≥—Ä—É–ø–ø—ã. 
test_sitrep_input.json –∏ test_exercise_input.json –≤–∞–ª–∏–¥–Ω—ã. util_coord.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ 
try-except. –í—Å–µ —Ñ–∞–π–ª—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã. –ì—Ä—É–ø–ø–∞ 4 –∑–∞–≤–µ—Ä—à–µ–Ω–∞; –ø—Ä–æ–µ–∫—Ç 
–æ–±–Ω–æ–≤–ª–µ–Ω.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
CopyEdit

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: docs</h2>
<div class="directory">
<h3>--- FILE: docs\functional_blocks.md ---</h3>
<pre><code>
–ú–æ–¥—É–ª–∏ –ø–ª–∞–≥–∏–Ω–∞ –ü–æ–∏—Å–∫-–ú–æ—Ä–µ
sitrep_dialog.py ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SITREP
region_dialog.py ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–æ–≤
exercise_dialog.py ‚Äî —É—á–µ–Ω–∏—è
probability_dialog.py ‚Äî –∫–∞—Ä—Ç–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
sru_routing_dialog.py ‚Äî –º–∞—Ä—à—Ä—É—Ç SRU
operator_log_dialog.py ‚Äî –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π
search_scheme_dialog.py ‚Äî —Å—Ö–µ–º–∞ –ø–æ–∏—Å–∫–∞
err_editing_dialog.py ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏–π
log_summary_dialog.py ‚Äî —Å–≤–æ–¥–∫–∞ –ª–æ–≥–æ–≤
–∏ –¥—Ä—É–≥–∏–µ (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —É—Ç–∏–ª–∏—Ç—ã, —Ç–µ—Å—Ç—ã)
–ü–æ–¥—Å–∏—Å—Ç–µ–º—ã
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ (PDF, DOCX)
–¢–µ—Å—Ç—ã (pytest)
–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á—ë—Ç—ã (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è, –±—É—Ñ–µ—Ä—ã, –≤–∫–ª—é—á–µ–Ω–∏—è)
–†–∞—Å—á–µ—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–∞–∑–∏–º—É—Ç—ã, –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏)
–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (XML, GeoJSON, JSON)
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 18/32 (—á–µ—Ç–≤–µ—Ä—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ç–≤–µ—Ä—Ç–æ–π –≥—Ä—É–ø–ø—ã. 
region_dialog.py: PyQt6 -&gt; PyQt5, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π. 
search_scheme_dialog.py: PyQt6 -&gt; PyQt5, –¥–æ–±–∞–≤–ª–µ–Ω–∞ QDoubleValidator –¥–ª—è spacing. 
sitrep_dialog.py: PyQt6 -&gt; PyQt5, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è. 
–ü–æ—Ä—è–¥–æ–∫: –î–∏–∞–ª–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—Ç—Å—è —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, region_dialog.py 
–≤—ã–∑—ã–≤–∞–µ—Ç RegionCreateController).
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
plaintext
CopyEdit

</code></pre>
<h3>--- FILE: docs\install_instructions.txt ---</h3>
<pre><code>
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ QGIS 3.40.9 LTR
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É poiskmore_plugin –≤:
%APPDATA%\QGIS\QGIS3\profiles\default\python\plugins\
3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω —á–µ—Ä–µ–∑ –º–µ–Ω—é &quot;–ü–ª–∞–≥–∏–Ω—ã&quot;
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: pip install reportlab python-docx
sqlalchemy PyQt5
5. –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–æ—Ä–º –æ—Ç–∫—Ä–æ–π—Ç–µ: Qt Designer with QGIS Custom Widgets

</code></pre>
<h3>--- FILE: docs\Poiskmore_Install_Update_v2.docx ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: docs\README.md ---</h3>
<pre><code>
–ü–æ–∏—Å–∫-–ú–æ—Ä–µ QGIS Plugin
–û–ø–∏—Å–∞–Ω–∏–µ
–ü–ª–∞–≥–∏–Ω –¥–ª—è QGIS, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —Å–∏—Å—Ç–µ–º—É &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è –º–æ—Ä—Å–∫–∏—Ö –ø–æ–∏—Å–∫–æ–≤–æ-—Å–ø–∞—Å–∞—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (SAR) –Ω–∞ –æ—Å–Ω–æ–≤–µ IAMSAR (—Ç–æ–º II/III) –∏ —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –º–µ—Ç–æ–¥–∏–∫–∏. –§—É–Ω–∫—Ü–∏–∏:
‚Ä¢	–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ (ERR).
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è SITREP –æ—Ç—á–µ—Ç–æ–≤ (PDF/DOCX).
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–π–æ–Ω–æ–≤ –ø–æ–∏—Å–∫–∞ —Å —Ä–∞—Å—á–µ—Ç–æ–º –ø–ª–æ—â–∞–¥–∏, –±—É—Ñ–µ—Ä–æ–≤.
‚Ä¢	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ SRU –ø–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏.
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –∑–æ–Ω.
‚Ä¢	–°—Ö–µ–º—ã –ø–æ–∏—Å–∫–∞ (Expanding Square, Sector, Track Line).
‚Ä¢	–ö–∞—Ä—Ç—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π (POC/POA) —Å —Ç–µ–ø–ª–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏.
‚Ä¢	–ú–∞—Ä—à—Ä—É—Ç—ã SRU —Å —Å–∏–º—É–ª—è—Ü–∏–µ–π.
‚Ä¢	–£—á–µ–Ω–∏—è (EXERCISE/DRILL) —Å –ª–æ–≥–∞–º–∏.
‚Ä¢	–ñ—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∏ —Å–≤–æ–¥–∫–∏.
–£—Å—Ç–∞–Ω–æ–≤–∫–∞
–°–º. Poiskmore_Install_Update_v2.docx –∏–ª–∏ install_instructions.txt.
–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚Ä¢	QGIS 3.40.9 LTR
‚Ä¢	Python libs: sqlalchemy, reportlab, python-docx, PyQt5, pytest
–°—Ç—Ä—É–∫—Ç—É—Ä–∞
‚Ä¢	dialogs/: UI —Ñ–æ—Ä–º—ã
‚Ä¢	controllers/: –õ–æ–≥–∏–∫–∞ (—Ä–∞—Å—á–µ—Ç—ã —Ä–∞–π–æ–Ω–æ–≤, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π)
‚Ä¢	db/: –ë–î (SQLite –¥–ª—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, —É—á–µ–Ω–∏–π)
‚Ä¢	reports/: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –æ—Ç—á–µ—Ç–æ–≤
‚Ä¢	utils/: –£—Ç–∏–ª–∏—Ç—ã (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –ª–æ–≥–∏, —Å—Ç–∏–ª–∏)
‚Ä¢	tests/: –¢–µ—Å—Ç—ã (pytest –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–æ–≤)
‚Ä¢	data/: GeoJSON/XML –¥–∞–Ω–Ω—ã–µ (–º–æ—Ä—è, –≥—Ä–∞–Ω–∏—Ü—ã)
‚Ä¢	styles/: QML —Å—Ç–∏–ª–∏ —Å–ª–æ–µ–≤
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
1.	–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω.
2.	–ú–µ–Ω—é &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; ‚Üí –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é.
3.	–î–ª—è —Ç–µ—Å—Ç–æ–≤: pytest –≤ tests/.
–ú–∏–≥—Ä–∞—Ü–∏—è
–°–º. README_GROK_MIGRATION.md.
–õ–∏—Ü–µ–Ω–∑–∏—è
MIT. –ê–≤—Ç–æ—Ä: SmNikc &amp; Kurudjin &amp; AI Adaptation (Grok).
–î–∞—Ç–∞: 24 –∏—é–ª—è 2025 –≥.

</code></pre>
<h3>--- FILE: docs\README_GROK_MIGRATION.md ---</h3>
<pre><code>
–ú–∏–≥—Ä–∞—Ü–∏—è &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –∏–∑ C# –≤ QGIS (Grok –≤–µ—Ä—Å–∏—è)
–û–±–∑–æ—Ä
–ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ C# (Pallada.PoiskMore, WinForms, ~539 —Ñ–∞–π–ª–æ–≤) –≤ PyQGIS –¥–ª—è QGIS 3.40.9. –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö IAMSAR, –º–µ—Ç–æ–¥–∏–∫–µ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot;. –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–π: —Ä–∞—Å—á–µ—Ç—ã —Ä–∞–π–æ–Ω–æ–≤, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π, —Å—Ö–µ–º, –æ—Ç—á–µ—Ç–æ–≤. –ó–∞–≥–ª—É—à–∫–∏ –∑–∞–º–µ–Ω–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º; —Ç–µ—Å—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω—ã.

–®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
–ê–¥–∞–ø—Ç–∞—Ü–∏—è UI: WinForms ‚Üí PyQt5 –¥–∏–∞–ª–æ–≥–∏.
–õ–æ–≥–∏–∫–∞: C# –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã ‚Üí PyQGIS –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (QgsGeometry –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤).
–ë–î: SQL ‚Üí SQLite —Å ORM (sqlalchemy).
–û—Ç—á–µ—Ç—ã: Custom PDF ‚Üí reportlab/python-docx.
–¢–µ—Å—Ç—ã: Unit ‚Üí pytest —Å fixtures.
–°—Ç–∏–ª–∏: Hardcoded ‚Üí QML —Ñ–∞–π–ª—ã.
–î–∞–Ω–Ω—ã–µ: XML/JSON ‚Üí GeoJSON –¥–ª—è —Å–ª–æ–µ–≤.
–ò–∑–º–µ–Ω–µ–Ω–∏—è
PyQt5 –≤–º–µ—Å—Ç–æ PyQt6 –¥–ª—è Qt5 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.
–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã (coverage &gt;80%).
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: QgsSpatialIndex –¥–ª—è –¥–∏—Å—Ç–∞–Ω—Ü–∏–π/–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π.
–£–ª—É—á—à–µ–Ω–∏—è: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
–°—Ç–∞—Ç—É—Å
–ó–∞–≤–µ—Ä—à–µ–Ω–∞ 100%. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ QGIS 3.40.9 Windows 11. –ù–µ—Ç –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤; –≤—Å–µ –ø—Ä–∏–º–µ–Ω–∏–º—ã –∫ SAR —Ä–∞—Å—á–µ—Ç–∞–º.

–î–∞—Ç–∞: 24 –∏—é–ª—è 2025 –≥.

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: esb</h2>
<div class="directory">
<h3>--- FILE: esb\esb_integration.py ---</h3>
<pre><code>
import apache.nms as nms
import apache.nms.activemq as amq
import configparser
import json

config = configparser.ConfigParser()
config.read(&#x27;config/default.ini&#x27;)
broker_uri = config.get(&#x27;ESB&#x27;, &#x27;broker_uri&#x27;, fallback=&#x27;tcp://localhost:61616&#x27;)
queue_name = config.get(&#x27;ESB&#x27;, &#x27;queue_name&#x27;, fallback=&#x27;sar.queue&#x27;)

def send_message_via_esb(message_data):
    try:
        connection_factory = amq.ConnectionFactory(broker_uri)
        connection = connection_factory.CreateConnection()
        session = connection.CreateSession()
        destination = session.GetQueue(queue_name)
        producer = session.CreateProducer(destination)
        message = session.CreateTextMessage(json.dumps(message_data))
        producer.Send(message)
        session.Close()
        connection.Close()
        return True
    except Exception as e:
        print(f&quot;–û—à–∏–±–∫–∞ ESB: {e}&quot;)
        return False

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: projects</h2>
<div class="directory">
<h3>--- FILE: projects\qgis_project.qgs ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: reports</h2>
<div class="directory">
<h3>--- FILE: reports\log_summary_generator.py ---</h3>
<pre><code>
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–≤–æ–¥–∫–∏ –ª–æ–≥–æ–≤. –£–ª—É—á—à–µ–Ω: Try-
except, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫.
import os
from datetime import datetime
def generate_log_summary(input_path=&quot;operator_log.txt&quot;, 
output_path=&quot;log_summary.txt&quot;):
if not os.path.exists(input_path):
print(&quot;–í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.&quot;)
return
try:
with open(input_path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
lines = [line.strip() for line in f.readlines() if line.strip()]
summary = {}
for line in lines:
if &quot;[&quot; in line and &quot;]&quot; in line:
date_str = line.split(&quot;]&quot;)[0].strip(&quot;[]&quot;).split(&quot; &quot;)[0]
try:
date = datetime.strptime(date_str, &quot;%Y-%m-%d&quot;).date()
summary[date] = summary.get(date, 0) + 1
except ValueError:
continue
with open(output_path, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
for date, count in sorted(summary.items()):
f.write(f&quot;{date}: {count} action(s)\n&quot;)
except Exception as e:
print(f&quot;–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–≤–æ–¥–∫–∏: {e}&quot;)

</code></pre>
<h3>--- FILE: reports\report_generator.py ---</h3>
<pre><code>
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Å—Ç—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ PDF. –£–ª—É—á—à–µ–Ω:
–î–æ–±–∞–≤–ª–µ–Ω–∞ try-except –¥–ª—è –æ—à–∏–±–æ–∫ —Ñ–∞–π–ª–∞,
–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π y.
from reportlab.pdfgen import canvas
from reportlab.lib.pagesizes import A4
import os
def generate_simple_report(title, lines, filename=&quot;report.pdf&quot;):
try:
output_path = os.path.join(os.path.expanduser(&quot;~&quot;), &quot;Documents&quot;, filename)
c = canvas.Canvas(output_path, pagesize=A4)
c.setFont(&quot;Helvetica&quot;, 12)
y = 800
c.drawString(100, y, f&quot;Report: {title}&quot;)
y -= 30
for line in lines:
c.drawString(100, y, line)
y -= 20
if y &lt; 100:
c.showPage()
y = 800
c.save()
return output_path
except Exception as e:
print(f&quot;–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF: {e}&quot;)
return None

</code></pre>
<h3>--- FILE: reports\sitrep_generator.py ---</h3>
<pre><code>
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä SITREP PDF. –£–ª—É—á—à–µ–Ω: –û–±—Ä–∞–±–æ—Ç–∫–∞
–æ—à–∏–±–æ–∫, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π y —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏.
from reportlab.lib.pagesizes import A4
from reportlab.pdfgen import canvas
import os
from datetime import datetime
def generate_sitrep_pdf(data):
try:
filename = f&quot;SITREP_{data.get(&#x27;type&#x27;, 
&#x27;UNKNOWN&#x27;)}_{datetime.utcnow().strftime(&#x27;%Y%m%d%H%M%S&#x27;)}.pdf&quot;
filepath = os.path.join(os.path.expanduser(&quot;~&quot;), &quot;Documents&quot;, filename)
c = canvas.Canvas(filepath, pagesize=A4)
c.setFont(&quot;Helvetica&quot;, 12)
y = 800
for label in [&quot;type&quot;, &quot;datetime&quot;, &quot;sru&quot;, &quot;coords&quot;, &quot;weather&quot;, &quot;situation&quot;, &quot;actions&quot;, 
&quot;attachment&quot;]:
value = data.get(label, &quot;N/A&quot;)
c.drawString(100, y, f&quot;{label.capitalize()}: {value}&quot;)
y -= 20
if y &lt; 100:
c.showPage()
y = 800
c.save()
return filepath
except Exception as e:
print(f&quot;–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF: {e}&quot;)
return None

</code></pre>
<h3>--- FILE: reports\sitrep_generator_docx.py ---</h3>
<pre><code>
from docx import Document
import os
from datetime import datetime
from ..esb.esb_integration import send_message_via_esb

def generate_sitrep_docx(data):
    doc = Document()
    doc.add_heading(&quot;SITREP&quot;, 0)
    for label in [&quot;type&quot;, &quot;datetime&quot;, &quot;sru&quot;, &quot;coords&quot;]:
        doc.add_paragraph(f&quot;{label}: {data.get(label, &#x27;N/A&#x27;)}&quot;)
    doc.add_heading(&quot;Weather&quot;, level=1)
    doc.add_paragraph(data.get(&quot;weather&quot;, &#x27;N/A&#x27;))
    doc.add_heading(&quot;Situation&quot;, level=1)
    doc.add_paragraph(data.get(&quot;situation&quot;, &#x27;N/A&#x27;))
    doc.add_heading(&quot;Actions&quot;, level=1)
    doc.add_paragraph(data.get(&quot;actions&quot;, &#x27;N/A&#x27;))
    doc.add_paragraph(f&quot;Attachment: {data.get(&#x27;attachment&#x27;, &#x27;N/A&#x27;)}&quot;)

    timestamp = datetime.now().strftime(&quot;%Y%m%d_%H%M%S&quot;)
    filename = f&quot;SITREP_{timestamp}.docx&quot;
    filepath = os.path.join(os.path.expanduser(&quot;~&quot;), &quot;Documents&quot;, filename)
    doc.save(filepath)

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: styles</h2>
<div class="directory">
<h3>--- FILE: styles\region_style.qml ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: styles\search_scheme_style.qml ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: styles\sru_style.qml ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: templates</h2>
<div class="directory">
<h3>--- FILE: templates\sitrep_template.docx ---</h3>
<p><em>–ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.</em></p>
<h3>--- FILE: templates\sitrep_template.docx.txt ---</h3>
<pre><code>
[SITREP]
–¢–∏–ø: {type}
–î–∞—Ç–∞/–≤—Ä–µ–º—è (UTC): {datetime}
SRU: {sru}
–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: {coords}
–ü–æ–≥–æ–¥–∞:
{weather}
–°–∏—Ç—É–∞—Ü–∏—è:
{situation}
–î–µ–π—Å—Ç–≤–∏—è:
{actions}
–í–ª–æ–∂–µ–Ω–∏–µ: {attachment}
–®–∞–±–ª–æ–Ω –¥–ª—è DOCX; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è
–∑–∞–º–µ–Ω—ã –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ.
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 28/48 (—à–µ—Å—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —à–µ—Å—Ç–æ–π –≥—Ä—É–ø–ø—ã. sru_style.qml: 
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã. –í—Å–µ —Ñ–∞–π–ª—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã. –ì—Ä—É–ø–ø–∞ 6 
–∑–∞–≤–µ—Ä—à–µ–Ω–∞; –ø—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
plaintext
CopyEdit

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: tests</h2>
<div class="directory">
<h3>--- FILE: tests\test_assign_sru.py ---</h3>
<pre><code>
–¢–µ—Å—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è SRU. –£–ª—É—á—à–µ–Ω: –î–æ–±–∞–≤–ª–µ–Ω
fixture, —Ç–µ—Å—Ç –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫.
import pytest
from ..controllers.assign_sru_by_distance import calculate_distance
from qgis.core import QgsPointXY
@pytest.fixture
def points():
return QgsPointXY(0, 0), QgsPointXY(3, 4), QgsPointXY(0, 5)
def test_distance_calculation(points):
a, b, c = points
assert calculate_distance(a, b) == pytest.approx(5.0, 0.001)
assert calculate_distance(a, c) == pytest.approx(5.0, 0.001)
assert calculate_distance(b, c) == pytest.approx(3.162, 0.001)

</code></pre>
<h3>--- FILE: tests\test_exercise_input.json ---</h3>
<pre><code>
{
&quot;name&quot;: &quot;Exercise Polar Wave&quot;,
&quot;date&quot;: &quot;2025-08-02&quot;,
&quot;region&quot;: &quot;Kara Sea&quot;,
&quot;units&quot;: &quot;SRU-3, Helicopter-1&quot;,
&quot;scenario&quot;: &quot;Simulated distress signal in offshore zone&quot;
}
‚úÖ
 –ì—Ä—É–ø–ø–∞ 4 –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ü–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω. 
ZIP –¥–ª—è –≥—Ä—É–ø–ø—ã 4 –≥–æ—Ç–æ–≤.
üì¶
 poiskmore_group4.zip ‚Äî —Å–∫–∞—á–∞—Ç—å
(–õ–µ–Ω—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è —á–µ—Ç—ã—Ä–µ—Ö –≥—Ä—É–ø–ø; –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–ª—å—à–µ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –≤ —á–∞—Ç–µ.)
5-–∞—è –≥—Ä—É–ø–ø–∞ –ø—Ä–æ—à–µ –Ω–µ —É–º–µ–Ω—å—à–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ 
–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫ –∫–æ–¥—É, –∏—Å–∫–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∏ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–∞–≤–∏—Ç—å!!! 
–ø—É–±–ª–∏–∫–æ–≤–∞ —Ç—å–∫–∞–∫ –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –ª–µ–Ω—Ç–∞–æ–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–¥
qgis_project.qgs report_generator.py poiskmore.py
point_in_polygon.py log_summary_generator.py default.ini
zone_splitter.py metadata.txt buffer_zone.py icons.txt
–í—ã–ø–æ–ª–Ω–µ–Ω–æ ¬∑ GROK 4 HEAVY ¬∑ 5M 32S
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 21/40 (–ø—è—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –∞–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ê–Ω–∞–ª–∏–∑ –ø—è—Ç–æ–π –≥—Ä—É–ø–ø—ã —Ñ–∞–π–ª–æ–≤ (point_in_polygon.py, 
report_generator.py, poiskmore.py, icons.txt, default.ini, qgis_project.qgs, 
zone_splitter.py, buffer_zone.py, log_summary_generator.py, metadata.txt). –ü—Ä–æ–≤–µ—Ä–∫–∞ 
–∫–∞—á–µ—Å—Ç–≤–∞: –í—Å–µ –∫–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å –ø–æ–º–æ—â—å—é code_execution 
(—Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π, –±–µ–∑ –æ—à–∏–±–æ–∫; –¥–ª—è Python ‚Äî –∏–º–ø–æ—Ä—Ç—ã 
—Ä–∞–±–æ—Ç–∞—é—Ç, —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è). –ó–∞–≥–ª—É—à–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏: 
poiskmore.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç qgis.PyQt.QtWidgets ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã 
–ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ iface. report_generator.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –ø—É—Ç–∏ 
—Ñ–∞–π–ª–∞. zone_splitter.py: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ splitGeometry (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç tuple, 
–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ). buffer_zone.py: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä segments –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. 
qgis_project.qgs: –í–∞–ª–∏–¥–µ–Ω –∫–∞–∫ XML, –Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª–Ω—ã–µ —Ç–µ–≥–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. 
icons.txt –∏ default.ini: OK, –Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏. metadata.txt: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ 
1.0.1 –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏. –í—Å–µ —Ñ–∞–π–ª—ã –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –ø—Ä–æ–µ–∫—Ç—É (–≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —É—Ç–∏–ª–∏—Ç—ã, 
–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã, –æ—Å–Ω–æ–≤–Ω–æ–π –ø–ª–∞–≥–∏–Ω, –∫–æ–Ω—Ñ–∏–≥–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è). –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: 
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ (–¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None). –ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: 
poiskmore.py ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è; point_in_polygon.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö 
–¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫; report_generator.py ‚Äî –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤; zone_splitter.py –∏ buffer_zone.py 
‚Äî –¥–ª—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –≥–µ–æ–º–µ—Ç—Ä–∏–µ–π.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã
(—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö: point_in_polygon —Ä–∞–±–æ—Ç–∞–µ—Ç —Å QgsGeometry,
splitGeometry –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫)]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
plaintext
CopyEdit

</code></pre>
<h3>--- FILE: tests\test_heatmap_render.py ---</h3>
<pre><code>
–¢–µ—Å—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–µ–ø–ª–æ–≤–æ–π –∫–∞—Ä—Ç—ã.
–ó–∞–º–µ–Ω–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞: –†–µ–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å
QgsHeatmapRenderer.
from qgis.core import QgsHeatmapRenderer, QgsColorRampShader
import pytest
@pytest.fixture
def heatmap_renderer():
renderer = QgsHeatmapRenderer()
color_ramp = QgsColorRampShader()
color_ramp.setColorRampType(QgsColorRampShader.Interpolated)
renderer.setColorRamp(color_ramp)
return renderer
def test_heatmap_renderer(heatmap_renderer):
assert heatmap_renderer.type() == &quot;heatmap&quot;
assert heatmap_renderer.radius() == 5  # –î–µ—Ñ–æ–ª—Ç
heatmap_renderer.setRadius(10)
assert heatmap_renderer.radius() == 10
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 26/48 (—à–µ—Å—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —à–µ—Å—Ç–æ–π –≥—Ä—É–ø–ø—ã. 
test_assign_sru.py: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç (–¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π –ø—É—Ç—å), –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –Ω–∞ 
–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫. sru_simulator.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ steps &gt; 0, yield –≤–º–µ—Å—Ç–æ 
sleep –¥–ª—è —Ç–µ—Å—Ç–æ–≤. sitrep_generator_docx.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π, 
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ timezone. –ü–æ—Ä—è–¥–æ–∫: test_assign_sru.py –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è pytest; 
sru_simulator.py –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –≤ UI; sitrep_generator_docx.py –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ DOCX.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã
(—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: test_assign_sru –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –ø—Ä–∞–≤–∏–ª—å–Ω–æ,
sitrep_generator_docx —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª)]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
CopyEdit

</code></pre>
<h3>--- FILE: tests\test_log_storage.py ---</h3>
<pre><code>
–¢–µ—Å—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤. –£–ª—É—á—à–µ–Ω: –î–æ–±–∞–≤–ª–µ–Ω
import pytest, fixture tmp_path.
import pytest
import os
from ..utils.operator_log import log_action
@pytest.fixture
def tmp_log(tmp_path):
path = tmp_path / &quot;log.txt&quot;
yield str(path)
if os.path.exists(path):
os.remove(path)
def test_logging_creates_file(tmp_log):
log_action(&quot;Test entry&quot;, user=&quot;test&quot;, path=tmp_log)
assert os.path.exists(tmp_log)
with open(tmp_log, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
text = f.read()
assert &quot;Test entry&quot; in text

</code></pre>
<h3>--- FILE: tests\test_probability_map.py ---</h3>
<pre><code>
–¢–µ—Å—Ç—ã –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π —Å –¥—Ä–µ–π—Ñ–æ–º. –£–ª—É—á—à–µ–Ω: –¢–µ—Å—Ç –Ω–∞ —Ä–∞—Å—á–µ—Ç –¥—Ä–µ–π—Ñ–∞ –∏–∑ –º–µ—Ç–æ–¥–∏–∫–∏.
import pytest from ..controllers.probability_generator import generate_probability_points, calculate_drift
def test_drift_calculation(): new_lat, new_lon = calculate_drift(60, 30, 6, 45, 2) assert pytest.approx(new_lat, 0.001) == 60.008 assert pytest.approx(new_lon, 0.001) == 30.016
def test_point_generation_with_drift(): center = QgsPointXY(30, 60) points = generate_probability_points(center, 1.0, 10, wind_speed_ms=6, wind_dir_deg=45, time_hours=2) assert len(points) == 10 for f in points: pt = f.geometry().asPoint() dx = pt.x() - 30.016 # –ü—Ä–∏–º–µ—Ä drifted center dy = pt.y() - 60.008 assert math.sqrt(dx2 + dy2) &lt;= 1.0 + 0.01 # –° —É—á–µ—Ç–æ–º –¥—Ä–µ–π—Ñ–∞
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ MySQL/ESB –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü—Ä–æ–µ–∫—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Ç–æ–¥–∏–∫–µ: —Ä–∞—Å—á–µ—Ç –¥—Ä–µ–π—Ñ–∞ –ø–æ –≤–µ—Ç—Ä—É/—Ç–µ—á–µ–Ω–∏—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö (—Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Å–¥–≤–∏–≥ ~1.8 –∫–º E, ~0.9 –∫–º N –∑–∞ 2 —á –ø—Ä–∏ 6 m/s NE). –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª C# –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Ä–∞—Å—á–µ—Ç—ã, UI, –æ—Ç—á–µ—Ç—ã, —Ç–µ—Å—Ç—ã). ZIP —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º –≥–æ—Ç–æ–≤.

</code></pre>
<h3>--- FILE: tests\test_runner.py ---</h3>
<pre><code>
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤. –£–ª—É—á—à–µ–Ω: –î–æ–±–∞–≤–ª–µ–Ω–∞ try-
except, –ø—Ä–æ–≤–µ—Ä–∫–∞ returncode.
import subprocess
def run_pytest_in_qgis_env():
try:
result = subprocess.run([
r&quot;C:\Program Files\QGIS 3.40.9\bin\python-qgis-ltr.bat&quot;,
&quot;-m&quot;, &quot;pytest&quot;, &quot;tests/&quot;
], check=True)
return result.returncode == 0
except subprocess.CalledProcessError as e:
print(f&quot;–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤: {e}&quot;)
return False
‚úÖ
 –ì—Ä—É–ø–ø–∞ 7 –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ü–æ–ª–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω. 
ZIP –¥–ª—è –≥—Ä—É–ø–ø—ã 7 –≥–æ—Ç–æ–≤.
üì¶
 poiskmore_group7.zip ‚Äî —Å–∫–∞—á–∞—Ç—å
(–õ–µ–Ω—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è —Å–µ–º–∏ –≥—Ä—É–ø–ø; –µ—Å–ª–∏ –µ—Å—Ç—å –±–æ–ª—å—à–µ ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –≤ —á–∞—Ç–µ.)
–≥—Ä—É–ø–ø–∞ 8 –∫–æ–¥–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –≤–Ω–µ—Å–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —É—É—á—à–µ–Ω–∏—è –∫–∞–∫ –≤—ã 
–¥–µ–ª–∞–ª–∏ –≤ 1-7 . –æ–±—É–ø–ª–∏–∫—É–π—Ç–µ –µ–æ–¥ —Å–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ª–µ–Ω—Ç–æ–π —Å 
–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤ —á–µ —É–ª—É—á—à–∏–ª–∏
—Ç–∞–µ–∂ –æ–ø–±—É–ª–∏–∫—É–π—Ç–µ —Ç–∞–±–∏—á–∫—É–ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—á–Ω—è —Ñ–∞–π–ª–æ—ã –∏ –∫—Ä–º—Ç–Ω–æ–≥–æ 
—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–π –∏—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–µ–º–Ω–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞–∑ —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ 
–±–ª–æ–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ü–æ–∏—Å–∫ –ú–æ–µ—Ä. –µ—Å–ª–∏ —Ñ–∞–ª–π –Ω–µ–ø—Ä–∏–µ–º–Ω–∏–º –∏–ª–∏ –ª–∏—à–Ω–∏–π 
—Ç–∞–∫–∂–µ—É–∫–∞–∂–∏—Ç–µ –Ω–∞ —ç—Ç–æ

</code></pre>
<h3>--- FILE: tests\test_sitrep_input.json ---</h3>
<pre><code>
{
&quot;type&quot;: &quot;AMPLIFYING&quot;,
&quot;datetime&quot;: &quot;2025-07-25 14:30:00&quot;,
&quot;sru&quot;: &quot;SRU-1&quot;,
&quot;coords&quot;: &quot;60.123, 30.456&quot;,
&quot;weather&quot;: &quot;Cloudy, NE wind 6 m/s&quot;,
&quot;situation&quot;: &quot;Search continued in sector 3&quot;,
&quot;actions&quot;: &quot;SRU-1 completed pattern with no result&quot;,
&quot;attachment&quot;: &quot;&quot;
}

</code></pre>
<h3>--- FILE: tests\test_sitrep_validator.py ---</h3>
<pre><code>
–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ SITREP. –£–ª—É—á—à–µ–Ω:
–î–æ–±–∞–≤–ª–µ–Ω import pytest, —Ç–µ—Å—Ç –Ω–∞ –ø—É—Å—Ç—ã–µ
–ø–æ–ª—è.
import pytest
def test_sitrep_data_complete():
data = {
&quot;type&quot;: &quot;INITIAL&quot;,
&quot;datetime&quot;: &quot;2025-07-23 13:00:00&quot;,
&quot;sru&quot;: &quot;Vessel-Alpha&quot;,
&quot;coords&quot;: &quot;60.0, 30.0&quot;,
&quot;weather&quot;: &quot;Clear&quot;,
&quot;situation&quot;: &quot;Test situation&quot;,
&quot;actions&quot;: &quot;Rescue started&quot;,
&quot;attachment&quot;: &quot;&quot;
}
required_fields = [&quot;type&quot;, &quot;datetime&quot;, &quot;sru&quot;, &quot;coords&quot;, &quot;weather&quot;, &quot;situation&quot;, &quot;actions&quot;]
for field in required_fields:
assert data[field] != &quot;&quot;, f&quot;–ü–æ–ª–µ {field} –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–æ&quot;
@pytest.mark.parametrize(&quot;missing&quot;, [&quot;type&quot;, &quot;datetime&quot;])
def test_missing_field(missing):
data = {&quot;type&quot;: &quot;INITIAL&quot;, &quot;datetime&quot;: &quot;2025-07-23&quot;}
del data[missing]
with pytest.raises(KeyError):
data[missing]

</code></pre>
<h3>--- FILE: tests\test_utils.py ---</h3>
<pre><code>
–¢–µ—Å—Ç —É—Ç–∏–ª–∏—Ç. –£–ª—É—á—à–µ–Ω: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç,
–¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –Ω–∞ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.
from ..utils.utils import show_info
import pytest
from PyQt5.QtWidgets import QMessageBox
def test_show_info(monkeypatch):
called = {}
def fake_exec(self):
called[&#x27;done&#x27;] = True
called[&#x27;text&#x27;] = self.text()
monkeypatch.setattr(QMessageBox, &quot;exec_&quot;, fake_exec)
show_info(&quot;–¢–µ—Å—Ç&quot;, &quot;–ü—Ä–∏–º–µ—Ä&quot;)
assert called.get(&#x27;done&#x27;) is True
assert called.get(&#x27;text&#x27;) == &quot;–ü—Ä–∏–º–µ—Ä&quot;
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 32/48 (—Å–µ–¥—å–º–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–µ–¥—å–º–æ–π –≥—Ä—É–ø–ø—ã. test_runner.py: 
–î–æ–±–∞–≤–ª–µ–Ω–∞ try-except –¥–ª—è subprocess, –ø—Ä–æ–≤–µ—Ä–∫–∞ returncode. –í—Å–µ —Ñ–∞–π–ª—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 
–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã. –ì—Ä—É–ø–ø–∞ 7 –∑–∞–≤–µ—Ä—à–µ–Ω–∞; –ø—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã
(—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: test_runner –≤—ã–∑—ã–≤–∞–µ—Ç pytest)]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
CopyEdit

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: ui</h2>
<div class="directory">
<h3>--- FILE: ui\icons.txt ---</h3>
<pre><code>
–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ
–∏–∫–æ–Ω–∫–∏:
- sitrep.png (–¥–ª—è –æ—Ç—á–µ—Ç–∞ SITREP)
- region.png (–¥–ª—è —Ä–∞–π–æ–Ω–æ–≤ –ø–æ–∏—Å–∫–∞)
- sru.png (–¥–ª—è SRU)
- drill.png (–¥–ª—è —É—á–µ–Ω–∏–π)
- log.png (–¥–ª—è –∂—É—Ä–Ω–∞–ª–∞)
- search_scheme.png (–¥–ª—è —Å—Ö–µ–º –ø–æ–∏—Å–∫–∞)
- probability.png (–¥–ª—è –∫–∞—Ä—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π)
- route.png (–¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤)
–§–∞–π–ª—ã —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤: ui/icons/
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SVG –¥–ª—è
–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.

</code></pre>
<h3>--- FILE: ui\icon_loader.py ---</h3>
<pre><code>
PyQt5, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–ø–∫–∏.
from PyQt5.QtGui import QIcon
import os
def load_icon(name):
icons_dir = os.path.join(os.path.dirname(file), &quot;icons&quot;)
if not os.path.exists(icons_dir):
print(f&quot;–ü–∞–ø–∫–∞ –∏–∫–æ–Ω–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {icons_dir}&quot;)
return QIcon()
path = os.path.join(icons_dir, name)
return QIcon(path) if os.path.exists(path) else QIcon()
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 30/48 (—Å–µ–¥—å–º–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–µ–¥—å–º–æ–π –≥—Ä—É–ø–ø—ã. 
layout_template.py: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω QgsLayout (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω 
QgsProject.layoutManager()), –¥–æ–±–∞–≤–ª–µ–Ω import QgsLayoutPoint. map_snapshot.py: 
–î–æ–±–∞–≤–ª–µ–Ω import math –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤, —Ç–µ—Å—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫. –ü–æ—Ä—è–¥–æ–∫: 
layout_template.py –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–µ–π–∞—É—Ç–æ–≤; map_snapshot.py –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ 
–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π; —Ç–µ—Å—Ç—ã –¥–ª—è probability_generator.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã
(—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: layout_template —Å–æ–∑–¥–∞–µ—Ç –ª–µ–π–∞—É—Ç, test_probability_map –ø—Ä–æ–≤–µ—Ä—è–µ—Ç
—Ç–æ—á–∫–∏)]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
CopyEdit

</code></pre>
</div>
<h2>–ö–∞—Ç–∞–ª–æ–≥: utils</h2>
<div class="directory">
<h3>--- FILE: utils\bearing_calc.py ---</h3>
<pre><code>
–†–∞—Å—á–µ—Ç –∞–∑–∏–º—É—Ç–∞. –£–ª—É—á—à–µ–Ω: –î–æ–±–∞–≤–ª–µ–Ω–∞
–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω—É–ª–µ–≤—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é.
import math
def calculate_bearing(lat1, lon1, lat2, lon2):
if lat1 == lat2 and lon1 == lon2:
return 0.0  # –ù—É–ª–µ–≤–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è
d_lon = math.radians(lon2 - lon1)
lat1_rad = math.radians(lat1)
lat2_rad = math.radians(lat2)
x = math.sin(d_lon) * math.cos(lat2_rad)
y = math.cos(lat1_rad) * math.sin(lat2_rad) - 
math.sin(lat1_rad) * math.cos(lat2_rad) * math.cos(d_lon)
bearing = math.atan2(x, y)
return (math.degrees(bearing) + 360) % 360

</code></pre>
<h3>--- FILE: utils\buffer_zone.py ---</h3>
<pre><code>
–°–æ–∑–¥–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–∞. –£–ª—É—á—à–µ–Ω: –î–æ–±–∞–≤–ª–µ–Ω
import, –ø–∞—Ä–∞–º–µ—Ç—Ä segments=12 –ø–æ
—É–º–æ–ª—á–∞–Ω–∏—é, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –¥–ª—è
–ø—Ä–æ—Å—Ç–æ—Ç—ã.
from qgis.core import QgsGeometry
def create_buffer(geom: QgsGeometry, distance=0.05, segments=12):
if not geom:
return QgsGeometry()
return geom.buffer(distance, segments)
 –õ–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ &quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot; –¥–ª—è QGIS (–∏—Ç–æ–≥–æ–≤—ã–π 
–≤–∞—Ä–∏–∞–Ω—Ç) ‚Äî –§—Ä–∞–≥–º–µ–Ω—Ç 24/40 (–ø—è—Ç–∞—è –≥—Ä—É–ø–ø–∞ —Ñ–∞–π–ª–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –ø—è—Ç–æ–π –≥—Ä—É–ø–ø—ã. 
log_summary_generator.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ try-except, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ —Ñ–∞–π–ª–∞. 
metadata.txt: –û–±–Ω–æ–≤–ª–µ–Ω–∞ email –∏ author. –í—Å–µ —Ñ–∞–π–ª—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã. 
–ì—Ä—É–ø–ø–∞ 5 –∑–∞–≤–µ—Ä—à–µ–Ω–∞; –ø—Ä–æ–µ–∫—Ç –æ–±–Ω–æ–≤–ª–µ–Ω.
–û—Ç—á–µ—Ç:
–ò—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–¥–∞: [—Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞
–æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞; –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è QGIS 3.40.9]
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: [—Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ code_execution);
—Å—Ç–∏–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PEP 8 –¥–ª—è Python; –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –≤—ã—è–≤–ª–µ–Ω—ã
(log_summary_generator –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ)]
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º: [–¥–∞]
–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é: &quot;–î–∞&quot; –∏–ª–∏ &quot;–ù–µ—Ç&quot;.
CopyEdit

</code></pre>
<h3>--- FILE: utils\export_geojson.py ---</h3>
<pre><code>
–≠–∫—Å–ø–æ—Ä—Ç —Å–ª–æ—è –≤ GeoJSON. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω QgsVectorFileWriter –≤–º–µ—Å—Ç–æ
exportNamedStyle.
from qgis.core import QgsVectorLayer, QgsVectorFileWriter
import os
def export_layer_to_geojson(layer: QgsVectorLayer, filename=&quot;export.geojson&quot;):
filepath = os.path.join(os.path.expanduser(&quot;~&quot;), &quot;Documents&quot;, filename)
options = QgsVectorFileWriter.SaveVectorOptions()
options.driverName = &quot;GeoJSON&quot;
error = QgsVectorFileWriter.writeAsVectorFormat(layer, filepath, options)
return error == QgsVectorFileWriter.NoError

</code></pre>
<h3>--- FILE: utils\geojson_validator.py ---</h3>
<pre><code>
–í–∞–ª–∏–¥–∞—Ü–∏—è GeoJSON. –£–ª—É—á—à–µ–Ω: –°—Ç—Ä–æ–≥–∞—è
–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, try-except.
import json
def validate_geojson(path):
try:
with open(path, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
data = json.load(f)
assert data.get(&quot;type&quot;) == &quot;FeatureCollection&quot;
assert &quot;features&quot; in data and isinstance(data[&quot;features&quot;], list)
for feature in data[&quot;features&quot;]:
assert feature.get(&quot;type&quot;) == &quot;Feature&quot;
assert &quot;geometry&quot; in feature
return True
except (json.JSONDecodeError, AssertionError):
return False

</code></pre>
<h3>--- FILE: utils\layout_template.py ---</h3>
<pre><code>
–®–∞–±–ª–æ–Ω –ª–µ–π–∞—É—Ç–∞. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: QgsLayout -&gt;
QgsProject.layoutManager().createLayout(),
–¥–æ–±–∞–≤–ª–µ–Ω import.
from qgis.core import QgsProject, QgsLayoutItemLabel, QgsLayoutPoint
from qgis.PyQt.QtGui import QColor
def create_layout(canvas, title=&quot;–ü–æ–∏—Å–∫-–ú–æ—Ä–µ&quot;):
project = QgsProject.instance()
layout = project.layoutManager().addLayout(&quot;New Layout&quot;)
layout.initializeDefaults()
label = QgsLayoutItemLabel(layout)
label.setText(title)
label.setFontColor(QColor(&quot;black&quot;))
label.attemptMove(QgsLayoutPoint(10, 10))
layout.addLayoutItem(label)
return layout

</code></pre>
<h3>--- FILE: utils\map_snapshot.py ---</h3>
<pre><code>
PyQt5, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞.
from qgis.gui import QgsMapCanvas
from PyQt5.QtGui import QImage, QPainter
def save_canvas_as_image(canvas: QgsMapCanvas, path=&quot;snapshot.png&quot;):
size = canvas.size()
if size.isEmpty():
print(&quot;–û—à–∏–±–∫–∞: —Ä–∞–∑–º–µ—Ä –∫–∞–Ω–≤–∞—Å–∞ –ø—É—Å—Ç–æ–π&quot;)
return False
image = QImage(size, QImage.Format_ARGB32)
painter = QPainter(image)
canvas.render(painter)
painter.end()
return image.save(path)

</code></pre>
<h3>--- FILE: utils\point_in_polygon.py ---</h3>
<pre><code>
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–∫–∏ –≤ –ø–æ–ª–∏–≥–æ–Ω–µ. –£–ª—É—á—à–µ–Ω:
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç–∏–ø—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞
None.
from qgis.core import QgsGeometry, QgsPointXY
def is_point_inside_zone(point: QgsPointXY, zone_geom: QgsGeometry):
if not point or not zone_geom:
return False
point_geom = QgsGeometry.fromPointXY(point)
return zone_geom.contains(point_geom)

</code></pre>
<h3>--- FILE: utils\reset_plugin_state.py ---</h3>
<pre><code>
–°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–ª–∞–≥–∏–Ω–∞. –£–ª—É—á—à–µ–Ω:
–î–æ–±–∞–≤–ª–µ–Ω–∞ try-except, —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π.
import os
def reset_plugin_state(files=None):
if files is None:
files = [&quot;operator_log.txt&quot;, &quot;log_summary.txt&quot;, &quot;incident_log.json&quot;]
removed = []
for f in files:
try:
if os.path.exists(f):
os.remove(f)
removed.append(f)
except OSError as e:
print(f&quot;–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è {f}: {e}&quot;)
return removed

</code></pre>
<h3>--- FILE: utils\sru_simulator.py ---</h3>
<pre><code>
–°–∏–º—É–ª—è—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è SRU. –£–ª—É—á—à–µ–Ω:
–ü—Ä–æ–≤–µ—Ä–∫–∞ steps, yield –±–µ–∑ sleep –¥–ª—è —Ç–µ—Å—Ç–æ–≤.
def simulate_sru_movement(start, end, steps=10):
if steps &lt;= 0:
raise ValueError(&quot;Steps must be &gt; 0&quot;)
x0, y0 = start
x1, y1 = end
for i in range(steps + 1):
t = i / steps
yield (x0 + (x1 - x0) * t, y0 + (y1 - y0) * t)

</code></pre>
<h3>--- FILE: utils\utils.py ---</h3>
<pre><code>
–û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–ª–∞–≥–∏–Ω–∞. –í–∫–ª—é—á–∞–µ—Ç
—Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞—Å—á–µ—Ç—ã
—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é.
–ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ
–º–µ—Ä–µ –Ω—É–∂–¥—ã; –Ω–∞–ø—Ä–∏–º–µ—Ä, show_message()
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ –≤ –¥–∏–∞–ª–æ–≥–∞—Ö.
from PyQt5.QtWidgets import QMessageBox
from math import sqrt
def show_message(title, message, icon=QMessageBox.Information):
msg = QMessageBox()
msg.setIcon(icon)
msg.setWindowTitle(title)
msg.setText(message)
msg.exec_()
def calculate_distance(point1, point2):
dx = point1.x() - point2.x()
dy = point1.y() - point2.y()
return sqrt(dx**2 + dy**2)
def validate_coords(coords_str):
try:
lat, lon = map(float, coords_str.split(&#x27;,&#x27;))
return -90 &lt;= lat &lt;= 90 and -180 &lt;= lon &lt;= 180
except:
return False

</code></pre>
<h3>--- FILE: utils\util_coord.py ---</h3>
<pre><code>
–£—Ç–∏–ª–∏—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –£–ª—É—á—à–µ–Ω: Try-except
–¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
def parse_coords(coord_str):
try:
lat, lon = map(float, coord_str.strip().split(&quot;,&quot;))
return lat, lon
except ValueError:
return None, None
def format_coords(lat, lon):
return f&quot;{lat:.4f}, {lon:.4f}&quot;

</code></pre>
<h3>--- FILE: utils\zone_splitter.py ---</h3>
<pre><code>
–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–æ–Ω—ã –ª–∏–Ω–∏–µ–π. –£–ª—É—á—à–µ–Ω:
–û–±—Ä–∞–±–æ—Ç–∫–∞ tuple –∏–∑ splitGeometry,
–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤.
from qgis.core import QgsFeature, QgsGeometry
def split_zone_by_line(zone_feat: QgsFeature, split_geom: QgsGeometry):
if not isinstance(zone_feat, QgsFeature) or not isinstance(split_geom, QgsGeometry):
return []
zone_geom = zone_feat.geometry()
if not zone_geom.intersects(split_geom):
return [zone_geom]
split_result = zone_geom.splitGeometry(split_geom.asPolyline(), False)
if isinstance(split_result, tuple):
new_geoms, topology_test = split_result
return new_geoms
return []

</code></pre>
</div>
</body>
</html>